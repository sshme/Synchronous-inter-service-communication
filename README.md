# Система антиплагиата (синхронное взаимодействие сервисов)

## Особенности реализации

### Files storage — S3

В качестве **хранилища файлов и картинок** используется [adobe/S3Mock](https://github.com/adobe/S3Mock) (вместо локального хранения), при запуске в prod режиме потребуется изменить конфигурационные файлы для использования реального S3.

> Это решение основывается на возможности масштабирования сервисов.

### API Gateway — [Traefik](https://traefik.io/)

Выбор осуществлялся среди таких **API Gateway**, как: Nginx, Kong, Traefix, HAProxy.
**Ключевыми критериями стали:** простота настройки, динамическая конфигурация, Kubernetes-интеграция.

> Хоть и traefik менее производительный, по сравнению с другими перечисленными, но он идеально подошел по заявленным требованиям. Бонусом стало наличие UI панели.

### Хэш файла

Основной критерий это безопасность (меньше коллизий) и скорость работы (так как файлы могут весить гигабайты).

Наиболее подходящим оказался [BLAKE3](https://en.wikipedia.org/wiki/BLAKE_(hash_function)) (в сравнении участвовало множество алгоритмов, приводить их не вижу смысла).

### Сравнение текстов, расчет уникальности

**[Алгоритм шинглов](http://rcdl2007.pereslavl.ru/papers/paper_65_v1.pdf)** 

Краткое описание алгоритма:
- Подготовка текста (нижний регистр, удаление стоп-слов, символов пунктуации...)
- Разбиение на последовательности слов (shingle)
- Поиск по хэшу shingle (md5, как самый быстрый, не нужна надежность) в базе данных
- Уникальность (%) = (Количество уникальных шинглов / Общее количество шинглов) * 100

## Запуск
```shell
  docker-compose up --build
```

- Dashboard: http://localhost:8080
- Swagger file-storing-service: http://localhost/store-api/docs
- Swagger file-analysis-service: http://localhost/analysis-api/docs
